<head>
  <script type="text/javascript" src="./libgif.js"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
      <link
          rel="preconnect"
          href="https://fonts.gstatic.com"
          crossorigin="crossorigin">
          <link
              href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@200;300;500&family=Lato:wght@300;400&family=Open+Sans:wght@400;600&family=Quicksand:wght@300;400&family=Ysabeau+SC:wght@100;300;500&display=swap"
              rel="stylesheet">
              <style>
                  body,
                  html {
                      height: 100%;
                      margin: 0;
                      overflow: hidden;
                      padding: 0;
                      background-color: RGB(55, 50, 75);
                      font-family: sans-serif;
                  }

                  #logo,
                  #source-gif,
                  .section {
                      display: none;
                  }

                  canvas {
                      position: absolute;
                      top: 0;
                      left: 0;
                      width: 110%;
                      height: 110%;
                  }

                  #logo,
                  #logo-img {
                      display: block;
                      position: absolute;
                      top: 10px;
                      left: 10px;
                      width: 75px;
                      z-index: 10;
                  }
                  #logo > p {
                      position: absolute;
                      top: 50px;
                      /* adjust this value according to your image's height */
                      left: 50px;
                      z-index: 10;
                      font-size: 0.3em;
                      width: 120px;
                      color: white;
                      font-family: 'Quicksand', sans-serif;
                  }

                  .section {
                      position: absolute;
                      top: 20%;
                      left: 20%;
                      width: 60%;
                      height: 60%;
                      border-radius: 8px;
                      background-color: lightyellow;
                      box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2);
                      align-items: center;
                      justify-content: center;
                      font-size: 3em;
                      transition: opacity 1s, transform 1s;
                      transform: scale(1.1);
                      visibility: hidden;
                  }

                  .section h1 {
                      text-align: center;
                  }

                  #section1 {
                      z-index: 3;
                      opacity: 1;
                  }
                  #section2 {
                      z-index: 2;
                  }
                  #section3 {
                      z-index: 1;
                  }
                  #section4 {
                      z-index: 1;
                  }
                  #overlay {
                      position: absolute;
                      top: 0;
                      left: 0;
                      width: 100%;
                      height: 100%;
                      background-color: rgba(18, 13, 40, 0.774);
                      /* You can change the RGB and alpha values */
                      pointer-events: none;
                      /* This makes the overlay non-blocking for mouse events */
                      z-index: 1;
                      /* Adjust z-index as needed so the overlay doesn't block other elements */
                  }
                  .visible {
                      opacity: 1;
                      transform: scale(1);
                      visibility: visible;
                  }
                  nav {
                    top: 0; /* Add this to position nav at the top */
                    right: 0; /* Add this to position nav at the right */
                    margin: 27px 27px 0 0; /* Adjust this to add space at the top-right corner */
                    position: absolute; /* Change from relative to absolute */
                    width: 590px;
                    height: 50px;
                    border-radius: 8px;
                    font-size: 0;
                    z-index: 2;
                    text-align: right;
                   opacity: 0; /* Initially hide nav */
                    transition: opacity 0.5s ease-in-out;
                }
        
                nav a {
                    line-height: 50px;
                    height: 100%;
                    font-size: 12px;
                    display: inline-block;
                    position: relative;
                    z-index: 1;
                    text-decoration: none;
                    text-transform: uppercase;
                    text-align: center;
                    color: lightyellow;
                    cursor: pointer;
                }
        
                nav a:hover {
                    background-color: lightyellow;
                    color: RGB(55, 50, 75);
                    border: radius 15px;
                }

                  nav .animation {
                      position: absolute;
                      height: 100%;
                      top: 0;
                      z-index: 0;
                      transition: all 0.5s ease 0s;
                      border-radius: 8px;
                  }

                  a[href="#section1"] {
                      width: 100px;
                  }

                  a[href="#section2"] {
                      width: 110px;
                  }

                  a[href="#section3"] {
                      width: 100px;
                  }

                  a[href="#section4"] {
                      width: 160px;
                  }

                 
              </style>
          </head>
          <body>
              <div id="overlay"></div>
              <div id="logo">
                  <img id="logo-img" src="/adg-ani-1-w.gif" alt="Logo">
                      <p>Reflecting your tech needs with an edge of creativity and expertise</p>
                  </div>
                  <div class="section visible" id="section1">
                      <h1>Section 1</h1>
                  </div>
                  <div class="section" id="section2">
                      <h1>Section 2</h1>
                  </div>
                  <div class="section" id="section3">
                      <h1>Section 3</h1>
                  </div>
                  <div class="section" id="section4">
                      <h1>Section 4</h1>
                  </div>

                  <nav>
                      <a href="#section1">Section 1</a>
                      <a href="#section2">Section 2</a>
                      <a href="#section3">section 3</a>
                      <a href="#section4">section 4</a>
                      <div class="animation start-home"></div>
                  </nav>

                  <img id="source-gif" src="./home-bg-3.gif" rel:auto_play="0"/>

                  <script type="text/javascript">
                      document.addEventListener("DOMContentLoaded", function () {
                          let img_tag = document.getElementById('source-gif');
                          var rub = new SuperGif(
                              {gif: img_tag, auto_play: false, draw_while_loading: false, show_progress_bar: false}
                          );
                          let sections = ["section1", "section2", "section3", "section4"];
                          let currentIndex = 0;
                          let isScrolling = false;
                          let scrollTimeout;

                          rub.load(function () {
                              console.log('oh hey, now the gif is loaded');
                              rub.play(); // Play the gif initially

                              setTimeout(function () {
                                  rub.pause(); // Pause the gif
                              }, 5000);

                              setTimeout(function () {
                                  document
                                      .getElementById('overlay')
                                      .style
                                      .display = 'block';
                                  setTimeout(function () {
                                      document
                                          .getElementById('logo')
                                          .style
                                          .display = 'block';
                                      setTimeout(function () {
                                          for (let i = 0; i < sections.length; i++) {
                                              document
                                                  .getElementById(sections[i])
                                                  .style
                                                  .display = 'flex';
                                          }
                                      }, 100);
                                  }, 1000);
                              }, 1000);
                          });

                          let debounceFunction = function (func, delay) {
                              return function () {
                                  const context = this;
                                  const args = arguments;
                                  clearTimeout(scrollTimeout);
                                  scrollTimeout = setTimeout(() => func.apply(context, args), delay);
                              }
                          }

                          window.addEventListener('wheel', debounceFunction(function (e) {
                              if (isScrolling) 
                                  return;
                              isScrolling = true;

                              // Hide current section
                              document
                                  .getElementById(sections[currentIndex])
                                  .classList
                                  .remove('visible');

                              // Check scroll direction
                              if (e.deltaY > 0) {
                                  // Scroll down: Move to next section
                                  currentIndex = (currentIndex + 1) % sections.length;
                              } else {
                                  // Scroll up: Move to previous section
                                  currentIndex = (currentIndex - 1 + sections.length) % sections.length;
                              }

                              // Show new section
                              document
                                  .getElementById(sections[currentIndex])
                                  .classList
                                  .add('visible');

                              // Play the gif during the scrolling
                              rub.play();

                              // Pause the gif after scrolling
                              setTimeout(function () {
                                  rub.pause();
                                  isScrolling = false;
                              }, 1500);
                          }, 250));

                          document.querySelector('nav').addEventListener('click', function(event) {
                            event.preventDefault();
                        
                            // Check if a link was clicked
                            if (event.target.tagName === 'A') {
                                // Hide current section
                                document.getElementById(sections[currentIndex]).classList.remove('visible');
                        
                                // Get new index
                                let sectionId = event.target.getAttribute('href').substring(1); // Remove #
                                currentIndex = sections.indexOf(sectionId);
                        
                                // Show new section
                                document.getElementById(sections[currentIndex]).classList.add('visible');
                        
                                // Adjust animation
                                let animationDiv = document.querySelector('nav .animation');
                                animationDiv.className = 'animation start-' + sectionId;
                            }
                        });

                      window.onload = function() {
                        console.log('showing nav, onload');
                        var nav = document.querySelector('nav');
                        nav.classList.add('visible');
                    };
                    
                      });
                  </script>

              </body>
          </html>